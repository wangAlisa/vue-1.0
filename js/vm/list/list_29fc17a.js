define("js/vm/list/list",function(n,i,e){var r=n("js/util/util");n("js/filter/filter");var t=Vue.extend({template:'<section class="list">\r\n	<ul class="types clearfix">\r\n		<li v-for ="item in types" v-on:click = "sortBy(item.key)"  data = "bln">\r\n			<span>{{item.value}}</span>\r\n			<span  class="arrow"></span>\r\n		</li>\r\n	</ul>\r\n	<ul class="list-container">\r\n		<li v-for = "item in dealList">\r\n\r\n			<div class= "saled">\r\n				<span class = "productNum">购买数量 ：</span>\r\n				<span v-on:click = "clickDown"> - </span>\r\n				<span class = "num" > {{num}}</span>\r\n				<span  v-on:click = "clickUp"> + </span>\r\n			</div>\r\n\r\n			<a v-bind:href="\'#detail/\' +item.id">\r\n				<img v-bind:src="\'img/list/\' +item.img" />\r\n				<div class="content">\r\n					<h3>{{item.title}}</h3>\r\n					<p>\r\n						<span class ="price">{{item.price | price}}</span>\r\n						<span class = "orignPrice">\r\n						<strike> {{item.orignPrice | orignPrice}} \r\n						</strike>\r\n						</span>\r\n						<span class = "evaluate">{{item.evaluate | evaluate}}</span>\r\n						<span class= "sales">{{item.sales | sales}}</span>\r\n					</p>\r\n				</div>\r\n			</a>\r\n		</li>\r\n	</ul>\r\n	<div class="load-more" v-on:click = "loadMore" v-show="others.length">\r\n	<span>查看剩余{{others.length}}条团购</span>\r\n	<span class=\'arrow\'>\r\n		<span class="arrow white"></span>\r\n	</span>\r\n	</div>\r\n</section>',props:["searchvalue"],data:function(){return{types:[{value:"价格排序",key:"price"},{value:"销量排序",key:"sales"},{value:"好评排序",key:"evaluate"},{value:"优惠排序",key:"discount"}],list:[],others:[],bln:!0,query:"",num:1}},computed:{dealList:function(){var n=this;return this.list.filter(function(i){return i.title.indexOf(n.searchvalue)>=0})}},created:function(){this.$parent.showTitle=!1,this.$parent.showSearch=!0,this.$parent.showNav=!0,this.$parent.$children[0].showCarousel=!1,console.log(this.$parent.$children[0].showCarousel),this.query=this.$parent.query[1];var n=this,i="data/list.json?"+this.$parent.query[0]+"="+this.$parent.query[1];r.ajax(i,function(i){i&&0===i.errno&&(n.list=i.data.slice(0,3),n.others=i.data.slice(3))})},methods:{sortBy:function(n){this.bln=!this.bln,this.list.sort(this.bln?"discount"===n?function(n,i){return i.orignPrice-i.price-(n.orignPrice-n.price)}:function(i,e){return e[n]-i[n]}:"discount"===n?function(n,i){return n.orignPrice-n.price-(i.orignPrice-i.price)}:function(i,e){return i[n]-e[n]})},loadMore:function(){this.list=this.list.concat(this.others),this.others=[]},clickDown:function(n){+n.target.nextSibling.nextSibling.innerHTML<=0||(n.target.nextSibling.nextSibling.innerHTML=+n.target.nextSibling.nextSibling.innerHTML-1)},clickUp:function(n){n.target.previousSibling.previousSibling.innerHTML=+n.target.previousSibling.previousSibling.innerHTML+1}}});Vue.component("list",t),e.exports=t});